/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 2.5.0
 *
 * A simple yet powerful JQuery star rating plugin that allows rendering
 * fractional star ratings and supports Right to Left (RTL) input.
 *
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */
function SetRatingEvents(){(function(n){var f=0,e=5,i=.5,t=function(t,i){return typeof t=="undefined"||t===null||t===undefined||t==[]||t===""||i&&n.trim(t)===""},r=function(n,i,r){var u=t(n.data(i))?n.attr(i):n.data(i);return u?u:r[i]},o=function(n){var t=(""+n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},s=function(n,t){return parseFloat(n.toFixed(t))},u=function(t,i){this.$element=n(t);this.init(i)};u.prototype={constructor:u,_parseAttr:function(n,u){var l=this,s=l.$element,h,o,c;return s.attr("type")==="range"||s.attr("type")==="number"?(h=r(s,n,u),o=i,n==="min"?o=f:n==="max"?o=e:n==="step"&&(o=i),c=t(h)?o:h,parseFloat(c)):parseFloat(u[n])},listen:function(){var t=this;t.$rating.on("click",function(n){t.inactive||(w=n.pageX-t.$rating.offset().left,t.setStars(w),t.$element.trigger("change"),t.$element.trigger("rating.change",[t.$element.val(),t.$caption.html()]))});t.$clear.on("click",function(){t.inactive||t.clear()});n(t.$element[0].form).on("reset",function(){t.inactive||t.reset()})},initSlider:function(n){var r=this;t(r.$element.val())&&r.$element.val(0);r.initialValue=r.$element.val();r.min=typeof n.min!="undefined"?n.min:r._parseAttr("min",n);r.max=typeof n.max!="undefined"?n.max:r._parseAttr("max",n);r.step=typeof n.step!="undefined"?n.step:r._parseAttr("step",n);(isNaN(r.min)||t(r.min))&&(r.min=f);(isNaN(r.max)||t(r.max))&&(r.max=e);(isNaN(r.step)||t(r.step)||r.step==0)&&(r.step=i);r.diff=r.max-r.min},init:function(i){var r=this,u;r.options=i;r.initSlider(i);r.checkDisabled();$element=r.$element;r.containerClass=i.containerClass;r.glyphicon=i.glyphicon;u=r.glyphicon?"":"★";r.symbol=t(i.symbol)?u:i.symbol;r.rtl=i.rtl||r.$element.attr("dir");r.rtl&&r.$element.attr("dir","rtl");r.showClear=i.showClear;r.showCaption=i.showCaption;r.size=i.size;r.stars=i.stars;r.defaultCaption=i.defaultCaption;r.starCaptions=i.starCaptions;r.starCaptionClasses=i.starCaptionClasses;r.clearButton=i.clearButton;r.clearButtonTitle=i.clearButtonTitle;r.clearButtonBaseClass=t(i.clearButtonBaseClass)?"clear-rating":i.clearButtonBaseClass;r.clearButtonActiveClass=t(i.clearButtonActiveClass)?"clear-rating-active":i.clearButtonActiveClass;r.clearCaption=i.clearCaption;r.clearCaptionClass=i.clearCaptionClass;r.clearValue=i.clearValue;r.$element.removeClass("form-control").addClass("form-control");r.$clearElement=t(i.clearElement)?null:n(i.clearElement);r.$captionElement=t(i.captionElement)?null:n(i.captionElement);typeof r.$rating=="undefined"&&typeof r.$container=="undefined"&&(r.$rating=n(document.createElement("div")).html('<div class="rating-stars"><\/div>'),r.$container=n(document.createElement("div")),r.$container.before(r.$rating),r.$container.append(r.$rating),r.$element.before(r.$container).appendTo(r.$rating));r.$stars=r.$rating.find(".rating-stars");r.generateRating();r.$clear=t(r.$clearElement)?r.$container.find("."+r.clearButtonBaseClass):r.$clearElement;r.$caption=t(r.$captionElement)?r.$container.find(".caption"):r.$captionElement;r.setStars();r.$element.hide();r.listen();r.showClear&&r.$clear.attr({"class":r.getClearClass()});r.$element.removeClass("rating-loading")},checkDisabled:function(){var n=this;n.disabled=r(n.$element,"disabled",n.options);n.readonly=r(n.$element,"readonly",n.options);n.inactive=n.disabled||n.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var n=this,r=n.renderClear(),u=n.renderCaption(),i=n.rtl?"rating-container-rtl":"rating-container",f=n.getStars();i+=n.glyphicon?n.symbol==""?" rating-gly-star":" rating-gly":" rating-uni";n.$rating.attr("class",i);n.$rating.attr("data-content",f);n.$stars.attr("data-content",f);i=n.rtl?"star-rating-rtl":"star-rating";n.$container.attr("class",i+" rating-"+n.size);n.inactive?n.$container.removeClass("rating-active").addClass("rating-disabled"):n.$container.removeClass("rating-disabled").addClass("rating-active");typeof n.$caption=="undefined"&&typeof n.$clear=="undefined"&&(n.rtl?n.$container.prepend(u).append(r):n.$container.prepend(r).append(u));t(n.containerClass)||n.$container.removeClass(n.containerClass).addClass(n.containerClass)},getStars:function(){for(var n=this,r=n.stars,t="",i=1;i<=r;i++)t+=n.symbol;return t},renderClear:function(){var n=this,i;return n.showClear?(i=n.getClearClass(),!t(n.$clearElement))?(n.$clearElement.removeClass(i).addClass(i).attr({title:n.clearButtonTitle}),n.$clearElement.html(n.clearButton),""):'<div class="'+i+'" title="'+n.clearButtonTitle+'">'+n.clearButton+"<\/div>":""},renderCaption:function(){var n=this,r=n.$element.val(),i;return n.showCaption?(i=n.fetchCaption(r),!t(n.$captionElement))?(n.$captionElement.removeClass("caption").addClass("caption").attr({title:n.clearCaption}),n.$captionElement.html(i),""):'<div class="caption">'+i+"<\/div>":""},fetchCaption:function(n){var i=this,r=parseFloat(n),u=t(i.starCaptionClasses[r])?i.clearCaptionClass:i.starCaptionClasses[r],f=t(i.starCaptions[r])?i.defaultCaption.replace(/\{rating\}/g,r):i.starCaptions[r],e=r==i.clearValue?i.clearCaption:f;return'<span id="spanRatingByUser" class="'+u+'">'+e+"<\/span>"},getValueFromPosition:function(n){var t=this,u=o(t.step),r,i,f=t.$rating.width();return r=n/f,i=t.rtl?t.min+Math.floor(t.diff*r/t.step)*t.step:t.min+Math.ceil(t.diff*r/t.step)*t.step,i<t.min?i=t.min:i>t.max&&(i=t.max),i=s(parseFloat(i),u),t.rtl&&(i=t.max-i),i},setStars:function(n){var i=this,f=i.min,e=i.max,s=i.step,u=arguments.length?i.getValueFromPosition(n):t(i.$element.val())?0:i.$element.val(),r=0,h=i.$rating.width(),o=i.fetchCaption(u);r=(u-f)/e*100;i.rtl&&(r=100-r);i.$element.val(u);r+="%";i.$stars.css("width",r);i.$caption.html(o)},clear:function(){var n=this,t='<span class="'+n.clearCaptionClass+'">'+n.clearCaption+"<\/span>";n.$stars.removeClass("rated");n.inactive||n.$caption.html(t);n.$element.val(n.clearValue);n.setStars();n.$element.trigger("rating.clear")},reset:function(){var n=this;n.$element.val(n.initialValue);n.setStars();n.$element.trigger("rating.reset")},update:function(n){if(arguments.length>0){var t=this;t.$element.val(n);t.setStars()}},refresh:function(t){var i=this,r;arguments.length&&(r="",i.init(n.extend(i.options,t)),i.showClear?i.$clear.show():i.$clear.hide(),i.showCaption?i.$caption.show():i.$caption.hide())}};n.fn.rating=function(t){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var f=n(this),r=f.data("rating"),e=typeof t=="object"&&t;r||f.data("rating",r=new u(this,n.extend({},n.fn.rating.defaults,e,n(this).data())));typeof t=="string"&&r[t].apply(r,i)})};n.fn.rating.defaults={stars:5,glyphicon:!0,symbol:null,disabled:!1,readonly:!1,rtl:!1,size:"md",showClear:!0,showCaption:!0,defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:'You are rating this as "Below Average"',1.5:"One & Half Star",2:'You are rating this as "Average"',2.5:"Two & Half Stars",3:'You are rating this as "Good"',3.5:"Three & Half Stars",4:'You are rating this as "Very Good"',4.5:"Four & Half Stars",5:'You are rating this as "Excellent"'},starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-warning",2:"label label-warning",2.5:"label label-info",3:"label label-info",3.5:"label label-primary",4:"label label-primary",4.5:"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"><\/i>',clearButtonTitle:"Clear",clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaption:"Click on the stars to rate this establishment.",clearCaptionClass:"label label-default",clearValue:0,captionElement:null,clearElement:null,containerClass:null};n("input.rating").addClass("rating-loading");n(document).ready(function(){var t=n("input.rating"),i=Object.keys(t).length;i>0&&t.rating()})})(jQuery)}SetRatingEvents();